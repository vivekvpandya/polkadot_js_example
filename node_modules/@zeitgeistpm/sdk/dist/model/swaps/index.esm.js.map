{"version":3,"file":"index.esm.js","sources":["../../../src/model/swaps/index.ts"],"sourcesContent":["import { pfunc } from '@zeitgeistpm/utility/dist/pfunc'\nimport { Context, isRpcContext } from '../../context/types'\nimport { MetadataStorage } from '../../meta'\nimport { saturatedPoolsIndex } from './functions/saturatedPoolsIndex/index'\nimport { getPool, observePool$ } from './functions/getPool'\nimport { listPools } from './functions/listPools'\nimport { observePoolPrices$, poolPrices } from './functions/poolPrices'\nimport { PoolGetQuery, PoolPricesQuery, Swaps } from './types'\n\nexport * from './types'\n\n/**\n * Create top level enriched zeitgeist Swaps model.\n *\n * @generic C - Context\n * @param ctx C\n * @returns Swaps<C>\n */\nexport const model = <C extends Context<MS>, MS extends MetadataStorage>(\n  ctx: C,\n): Swaps<C, MS> => {\n  const swaps: Swaps<C, MS> = {\n    listPools: query => listPools<typeof ctx, MS>(ctx, query),\n\n    getPool: pfunc(\n      (query: PoolGetQuery) => getPool<typeof ctx, MS>(ctx, query),\n      (isRpcContext<MS>(ctx)\n        ? {\n            $: query => observePool$<typeof ctx, MS>(ctx, query),\n          }\n        : {}) as Swaps<typeof ctx, MS>['getPool'],\n    ),\n\n    poolPrices: pfunc(\n      (query: PoolPricesQuery) => poolPrices<typeof ctx>(ctx, query),\n      (isRpcContext<MS>(ctx)\n        ? {\n            $: query => observePoolPrices$(ctx, query),\n          }\n        : {}) as Swaps<typeof ctx, MS>['poolPrices'],\n    ),\n\n    saturatedPoolsIndex: pools => saturatedPoolsIndex<typeof ctx, MS>(ctx, pools),\n  }\n\n  return swaps\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAWA;;;;;;AAMG;AACU,MAAA,KAAK,GAAG,CACnB,GAAM,KACU;AAChB,IAAA,MAAM,KAAK,GAAiB;QAC1B,SAAS,EAAE,KAAK,IAAI,SAAS,CAAiB,GAAG,EAAE,KAAK,CAAC;AAEzD,QAAA,OAAO,EAAE,KAAK,CACZ,CAAC,KAAmB,KAAK,OAAO,CAAiB,GAAG,EAAE,KAAK,CAAC,GAC3D,YAAY,CAAK,GAAG,CAAC;AACpB,cAAE;gBACE,CAAC,EAAE,KAAK,IAAI,YAAY,CAAiB,GAAG,EAAE,KAAK,CAAC;AACrD,aAAA;cACD,EAAE,EACP;AAED,QAAA,UAAU,EAAE,KAAK,CACf,CAAC,KAAsB,KAAK,UAAU,CAAa,GAAG,EAAE,KAAK,CAAC,GAC7D,YAAY,CAAK,GAAG,CAAC;AACpB,cAAE;gBACE,CAAC,EAAE,KAAK,IAAI,kBAAkB,CAAC,GAAG,EAAE,KAAK,CAAC;AAC3C,aAAA;cACD,EAAE,EACP;QAED,mBAAmB,EAAE,KAAK,IAAI,mBAAmB,CAAiB,GAAG,EAAE,KAAK,CAAC;KAC9E,CAAA;AAED,IAAA,OAAO,KAAK,CAAA;AACd;;;;"}